<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PaluwaCash - System Check</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
    
    <style>
        body { background-color: #000; color: white; font-family: sans-serif; }
        .loader { border: 3px solid #333; border-top: 3px solid #00B14F; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #debug-console { display: none; color: #ff5555; font-family: monospace; font-size: 12px; margin-top: 20px; background: #220000; padding: 10px; border-radius: 5px; text-align: left; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">

    <div id="root" class="w-full h-full max-w-md mx-auto flex flex-col justify-center">
        <div style="margin-top: 100px; text-align: center;">
            <div class="loader"></div>
            <h2 class="text-white font-bold mt-4">Starting PaluwaCash...</h2>
            <p id="status-text" class="text-gray-500 text-xs mt-2">Loading Libraries...</p>
            <div id="debug-console"></div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>

    <script>
        const debug = document.getElementById('debug-console');
        const status = document.getElementById('status-text');
        
        function logError(msg) {
            debug.style.display = 'block';
            debug.innerHTML += `‚ùå ${msg}<br>`;
            status.innerText = "System Error. See details below.";
            document.querySelector('.loader').style.borderTopColor = 'red';
        }

        // Check if libraries loaded
        if (!window.React) logError("React failed to load. Check your internet.");
        else if (!window.ReactDOM) logError("ReactDOM failed to load.");
        else if (!window.Babel) logError("Babel failed to load.");
        else status.innerText = "Libraries Loaded. Starting App...";
    </script>

    <script type="text/babel">
        try {
            const { useState, useEffect } = React;

            // --- ICONS ---
            const Icon = ({ name, size = 20, className = "" }) => {
                // Simplified Icons path data
                const icons = {
                    bell: "M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 0 1-3.46 0",
                    plus: "M12 5v14M5 12h14",
                    search: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",
                    chevronLeft: "M15 19l-7-7 7-7",
                    shield: "M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",
                    users: "M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z",
                    check: "M5 13l4 4L19 7",
                    trophy: "M8 21h8M12 17v4m-9-3a2 2 0 002 2h14a2 2 0 002-2M3 18l.757-10.596A4.003 4.003 0 017.747 4h8.506a4.003 4.003 0 013.99 3.404L21 18",
                    clock: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                };
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                        <path d={icons[name] || icons.bell} />
                    </svg>
                );
            };

            // --- DATA ---
            const REGIONS = { PH: { code: 'PH', currency: '‚Ç±', flag: 'üáµüá≠' }, GLOBAL: { code: 'GLOBAL', currency: '$', flag: 'üåé' } };
            const USER = { id: 'u1', name: 'Juan Dela Cruz', balance: 15420.50, isManager: true, avatar: 'üòé' };
            const CIRCLES = [
                { id: 1, name: 'Boracay Trip', contrib: 2000, pot: 20000, members: 10, currentRound: 3, totalRounds: 10, lvl: 3, mgr: 'Sarah L.', nextPayout: 'Oct 15' },
                { id: 2, name: 'iPhone 16 Pro', contrib: 5000, pot: 50000, members: 8, currentRound: 1, totalRounds: 10, lvl: 1, mgr: 'Mike T.', nextPayout: 'Nov 01' }
            ];
            const AUCTION_DATA = {
                id: 1, name: 'Boracay Trip Fund', pot: 20000, fees: 1000, topBid: 1200, timeLeft: '23h 15m', managerMsg: 'Reminder: Payment due Friday 5PM!',
                members: [
                    { id: 1, name: 'Sarah L.', status: 'LEADING', bid: 1200, avatar: 'üë©üèª' },
                    { id: 2, name: 'You', status: 'BIDDING', bid: 0, avatar: USER.avatar },
                    { id: 3, name: 'Mike T.', status: 'WATCHING', bid: 0, avatar: 'üë®üèª' },
                    { id: 4, name: 'Jenny K.', status: 'WON', round: 1, avatar: 'üëµüèª' },
                    { id: 5, name: 'Pedro P.', status: 'WON', round: 2, avatar: 'üë®üèΩ' },
                ]
            };
            const formatCurrency = (amt, r) => `${REGIONS[r].currency}${amt.toLocaleString()}`;

            // --- COMPONENTS ---
            const HomeScreen = ({ region, onNavigate }) => (
                <div className="p-4 space-y-6 pb-24 animate-fade-in">
                    <div className="flex justify-between items-center">
                        <div><h1 className="text-gray-400 text-xs font-medium tracking-wider">TOTAL BALANCE</h1><span className="text-3xl font-bold text-white">{formatCurrency(USER.balance, region)}</span></div>
                        <div className="bg-gray-800 p-2 rounded-full border border-gray-700"><Icon name="bell" size={18} className="text-gray-300" /></div>
                    </div>
                    <div className="grid grid-cols-2 gap-3">
                        <button onClick={() => onNavigate('deposit')} className="bg-green-600 text-white p-3 rounded-xl flex items-center justify-center gap-2 font-bold"><Icon name="plus" size={18} /> Deposit</button>
                        <button onClick={() => onNavigate('circles')} className="bg-gray-800 text-white p-3 rounded-xl flex items-center justify-center gap-2 font-bold border border-gray-700"><Icon name="search" size={18} /> Find Circle</button>
                    </div>
                    {USER.isManager && (
                        <div className="bg-gray-900 border-l-4 border-l-yellow-500 border border-gray-800 p-4 rounded-xl">
                            <div className="flex justify-between"><div className="flex gap-3"><div className="h-10 w-10 bg-gray-700 rounded-full flex items-center justify-center text-lg">üë®üèΩ</div><div><h3 className="font-bold text-white">Pedro P.</h3><span className="text-[10px] text-yellow-500 bg-yellow-900/30 px-1.5 py-0.5 rounded font-bold">‚ö†Ô∏è UNVERIFIED</span></div></div><button className="bg-white text-black text-xs font-bold px-3 py-2 rounded-lg">Review</button></div>
                        </div>
                    )}
                    <div className="bg-gray-900 rounded-xl p-4 border border-gray-800" onClick={() => onNavigate('auction')}>
                        <div className="flex justify-between mb-2">
                            <div><div className="flex items-center gap-2 mb-1"><span className="w-2 h-2 bg-red-500 rounded-full animate-pulse"></span><span className="text-[10px] font-bold text-red-500 tracking-wider">AUCTION LIVE</span></div><h3 className="text-white font-bold">Boracay Trip</h3><p className="text-xs text-gray-400 mt-1">Pot: {formatCurrency(20000, region)}</p></div>
                            <div className="bg-green-900/30 px-3 py-2 rounded-lg border border-green-500/30 text-center"><p className="text-[10px] text-green-500">Top Bid</p><p className="text-green-500 font-bold">{formatCurrency(1200, region)}</p></div>
                        </div>
                        <button className="w-full mt-2 bg-gray-800 hover:bg-gray-700 text-white text-xs font-bold py-2 rounded-lg border border-gray-700">Enter Room</button>
                    </div>
                </div>
            );

            const AuctionRoom = ({ onBack, region }) => {
                const [myBid, setMyBid] = useState(1250);
                const fees = AUCTION_DATA.fees;
                const dividendPool = myBid - fees;
                const dividendPerPerson = dividendPool > 0 ? (dividendPool / (AUCTION_DATA.members.length - 1)).toFixed(2) : "0.00";
                
                return (
                    <div className="flex flex-col h-full bg-[#0A0E17]">
                        <div className="p-4 border-b border-gray-800 flex items-center gap-3 sticky top-0 bg-[#0A0E17] z-10"><button onClick={onBack} className="p-2 bg-gray-800 rounded-lg text-white"><Icon name="chevronLeft" /></button><div><h1 className="text-white font-bold text-lg">{AUCTION_DATA.name}</h1><div className="flex items-center gap-1 text-xs text-red-400 font-mono"><Icon name="clock" size={12} /> {AUCTION_DATA.timeLeft} remaining</div></div></div>
                        <div className="flex-1 overflow-y-auto p-4 pb-40">
                             <div className="bg-gray-900 border border-gray-800 p-6 rounded-2xl text-center mb-6"><p className="text-gray-400 text-xs font-bold uppercase tracking-widest mb-1">Current Pot</p><p className="text-4xl font-bold text-white mb-2">{formatCurrency(AUCTION_DATA.pot, region)}</p><div className="inline-flex items-center gap-2 bg-green-900/30 px-3 py-1 rounded-full border border-green-500/30"><span className="text-green-500 text-xs font-bold">Top Bid: {formatCurrency(AUCTION_DATA.topBid, region)}</span></div></div>
                             
                             <h3 className="text-white text-sm font-bold mb-3">Eligible Bidders</h3>
                             <div className="space-y-2 mb-6">{AUCTION_DATA.members.filter(m => m.status !== 'WON').map(m => (<div key={m.id} className={`flex items-center justify-between p-3 rounded-xl border ${m.status === 'LEADING' ? 'bg-green-900/10 border-green-500' : 'bg-gray-800 border-gray-700'}`}><div className="flex items-center gap-3"><div className="text-xl">{m.avatar}</div><div><p className={`font-bold text-sm ${m.name === 'You' ? 'text-yellow-400' : 'text-white'}`}>{m.name}</p><p className="text-[10px] text-gray-400">{m.status}</p></div></div>{m.status === 'LEADING' && <span className="text-green-500 font-bold text-sm">‚Ç±{m.bid}</span>}</div>))}</div>
                             
                             <h3 className="text-gray-500 text-xs font-bold uppercase mb-3">Already Won</h3>
                             <div className="space-y-2 opacity-50">{AUCTION_DATA.members.filter(m => m.status === 'WON').map(m => (<div key={m.id} className="flex items-center justify-between p-3 bg-gray-900 rounded-xl border border-gray-800"><div className="flex items-center gap-3"><div className="text-lg">{m.avatar}</div><p className="font-medium text-gray-400 text-sm">{m.name}</p></div><div className="text-[10px] text-gray-400 font-bold">PAID</div></div>))}</div>
                        </div>
                        <div className="absolute bottom-0 w-full bg-[#111827] border-t border-gray-800 p-4 pb-8 z-20">
                            <div className="flex justify-between items-center mb-4 bg-gray-900 p-2 rounded-lg border border-gray-700"><div className="flex items-center gap-2"><span className="text-gray-400 text-xs">Group Earns</span></div><span className="text-green-500 font-bold text-sm">+{formatCurrency(dividendPerPerson, region)} / person</span></div>
                            <div className="flex gap-3"><div className="flex-1 bg-gray-800 rounded-xl flex items-center px-4 border border-gray-700"><span className="text-gray-500 mr-2 text-sm">{REGIONS[region].currency}</span><input type="number" value={myBid} onChange={e => setMyBid(e.target.value)} className="bg-transparent text-white font-bold w-full outline-none text-lg" /></div><button className="bg-green-600 text-white font-bold px-6 py-4 rounded-xl shadow-lg">Bid</button></div>
                        </div>
                    </div>
                );
            };

            const App = () => {
                const [screen, setScreen] = useState('home');
                const [region, setRegion] = useState('PH');
                return (
                    <div className="w-full max-w-md h-[800px] bg-[#0A0E17] relative flex flex-col shadow-2xl overflow-hidden rounded-[30px] border border-gray-800 mx-auto">
                        <div className="flex justify-between items-center px-6 py-3 text-white text-xs font-bold pt-10 bg-[#0A0E17]"><span>9:41</span><div className="flex gap-2"><span>üì∂</span><span>üîã</span></div></div>
                        <div className="flex-1 overflow-y-auto pb-0">
                            {screen === 'home' && <HomeScreen region={region} onNavigate={
